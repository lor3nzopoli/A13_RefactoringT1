<div th:fragment="footer">
	<!-- SCRIPTS-->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"
	></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
		integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
		crossorigin="anonymous"
	></script>


	<script>
		const getCookie = (name) => {
			const value = `; ${document.cookie}`;
			const parts = value.split(`; ${name}=`);
			if (parts.length === 2) return parts.pop().split(";").shift();
			return null;
		};

		const parseJwt = (token) => {
			try {
				return JSON.parse(atob(token.split(".")[1]));
			} catch (e) {
				return null;
			}
		};

		function insertStringInUsernameElement(username) {
			// Trova l'elemento con ID "username"
			var usernameElement = document.getElementById("Username");

			// Verifica se l'elemento esiste
			if (usernameElement) {
				// Inserisce la stringa nell'elemento
				usernameElement.textContent = username.split("@")[0];;
			} else {
				console.log("L'elemento con id 'username' non esiste.");
			}
		}

		const jwtData = parseJwt(getCookie("jwt"));
		const username = jwtData.sub;
        console.log(username);
		const userId = jwtData.userId;
        console.log(userId);
        insertStringInUsernameElement(username);
	</script>
</div>
